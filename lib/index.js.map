{"version":3,"sources":["../src/index.jsx"],"names":["require","MyComponent","props","e","Images","cacheExternalImage","config","href","canvas","refs","download","toDataURL","fileName","url","img","Image","src","cvs","document","createElement","ctx","getContext","crossOrigin","that","onload","style","height","width","drawImage","drawCanvas","handleClick","bind","buttonStyle","btName","display","Component"],"mappings":";;;;;;;;AAAA;;;;;;;;;;;;AACAA,QAAQ,aAAR;;IAEqBC,W;;;AACjB,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA,yHACTA,KADS;AAElB;;;;oCACWC,C,EAAE;AACb,gBAAIC,SAAS,KAAKC,kBAAL,CAAwB,KAAKH,KAAL,CAAWI,MAAX,CAAkBC,IAA1C,CAAb;AAAA,gBACOC,SAAS,KAAKC,IAAL,CAAUD,MAD1B;;AAGG,iBAAKC,IAAL,CAAUC,QAAV,CAAmBH,IAAnB,GAA0BC,OAAOG,SAAP,CAAiB,YAAjB,EAA+B,GAA/B,CAA1B;AACA,iBAAKF,IAAL,CAAUC,QAAV,CAAmBA,QAAnB,GAA8B,KAAKR,KAAL,CAAWI,MAAX,CAAkBM,QAAlB,GAA2B,MAAzD;AACH;;;2CACkBC,G,EAAI;AACnB,gBAAIC,MAAM,IAAIC,KAAJ,EAAV;AAAA,gBACAC,MAAMH,GADN;AAAA,gBAEAI,MAAMC,SAASC,aAAT,CAAuB,QAAvB,CAFN;AAAA,gBAGAC,MAAMH,IAAII,UAAJ,CAAe,IAAf,CAHN;AAIAP,gBAAIQ,WAAJ,GAAkB,WAAlB;AACAR,gBAAIE,GAAJ,GAAUA,GAAV;AACA,mBAAOF,GAAP;AACH;;;qCACW;AACR,gBAAIV,SAAS,IAAIW,KAAJ,EAAb;AAAA,gBACAD,MAAM,KAAKT,kBAAL,CAAwB,KAAKH,KAAL,CAAWI,MAAX,CAAkBC,IAA1C,CADN;AAAA,gBAEAgB,OAAO,IAFP;AAAA,gBAGAf,SAAS,KAAKC,IAAL,CAAUD,MAHnB;AAAA,gBAIAY,MAAIZ,OAAOa,UAAP,CAAkB,IAAlB,CAJJ;AAKAjB,mBAAOY,GAAP,GAAa,KAAKd,KAAL,CAAWI,MAAX,CAAkBC,IAA/B;AACAH,mBAAOoB,MAAP,GAAgB,YAAU;AACtBhB,uBAAOiB,KAAP,CAAaC,MAAb,GAAsBZ,IAAIY,MAAJ,GAAW,IAAjC;AACAlB,uBAAOiB,KAAP,CAAaE,KAAb,GAAqBb,IAAIa,KAAJ,GAAU,IAA/B;AACAnB,uBAAOkB,MAAP,GAAgBZ,IAAIY,MAApB;AACAlB,uBAAOmB,KAAP,GAAeb,IAAIa,KAAnB;AACAP,oBAAIQ,SAAJ,CAAcd,GAAd,EAAkB,CAAlB,EAAoB,CAApB,EAAsBA,IAAIa,KAA1B,EAAgCb,IAAIY,MAApC;AACH,aAND;AAOH;;;4CACkB;AACf,iBAAKG,UAAL;AACH;;;iCACQ;AACL,mBACI;AAAA;AAAA,kBAAG,WAAU,oBAAb,EAAkC,SAAS,KAAKC,WAAL,CAAiBC,IAAjB,CAAsB,IAAtB,CAA3C,EAAwE,KAAI,UAA5E,EAAuF,OAAO,KAAK7B,KAAL,CAAWI,MAAX,CAAkB0B,WAAlB,GAA8B,KAAK9B,KAAL,CAAWI,MAAX,CAAkB0B,WAAhD,GAA4D,EAA1J;AACK,qBAAK9B,KAAL,CAAWI,MAAX,CAAkB2B,MADvB;AAEC,0DAAQ,KAAI,QAAZ,EAAqB,OAAO,EAACC,SAAQ,MAAT,EAA5B;AAFD,aADJ;AAMH;;;;EA7CoC,gBAAMC,S;;kBAA1BlC,W","file":"index.js","sourcesContent":["import React from 'react'\nrequire('./index.css')\n\nexport default class MyComponent extends React.Component{\n    constructor(props) {\n        super(props)\n    }\n    handleClick(e){\n    \tlet Images = this.cacheExternalImage(this.props.config.href),\n            canvas = this.refs.canvas;\n        \n        this.refs.download.href = canvas.toDataURL(\"image/jpeg\", 1.0);\n        this.refs.download.download = this.props.config.fileName+\".png\";\n    }\n    cacheExternalImage(url){\n        var img = new Image,\n        src = url,\n        cvs = document.createElement('canvas'),\n        ctx = cvs.getContext('2d');\n        img.crossOrigin = \"Anonymous\";\n        img.src = src;\n        return img;\n    }\n    drawCanvas(){\n        let Images = new Image(),\n        img = this.cacheExternalImage(this.props.config.href),\n        that = this,\n        canvas = this.refs.canvas,\n        ctx=canvas.getContext('2d');\n        Images.src = this.props.config.href;\n        Images.onload = function(){\n            canvas.style.height = img.height+'px';\n            canvas.style.width = img.width+'px';\n            canvas.height = img.height;\n            canvas.width = img.width;\n            ctx.drawImage(img,0,0,img.width,img.height);\n        }\n    }\n    componentDidMount(){\n        this.drawCanvas();\n    }\n    render() {\n        return (\n            <a className='react-pic-download' onClick={this.handleClick.bind(this)} ref='download' style={this.props.config.buttonStyle?this.props.config.buttonStyle:{}}>\n                {this.props.config.btName}\n            \t<canvas ref='canvas' style={{display:'none'}}></canvas>\n            </a>\n        )\n    }\n}"]}